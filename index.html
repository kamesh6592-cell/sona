<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Secure Hierarchical Communication Platform for Sona College of Technology">
    <meta name="theme-color" content="#1E3A8A">
    
    <!-- Favicon -->
    <link rel="icon" href="https://upload.wikimedia.org/wikipedia/commons/9/9d/Sona_College_of_Technology_logo.jpg" type="image/jpeg">
    <link rel="apple-touch-icon" href="https://upload.wikimedia.org/wikipedia/commons/9/9d/Sona_College_of_Technology_logo.jpg">
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiU29uYSBDb21tdW5pY2F0aW9uIiwic2hvcnRfbmFtZSI6IlNvbmFDb21tIiwic3RhcnRfdXJsIjoiLiIsImRpc3BsYXkiOiJzdGFuZGFsb25lIiwiYmFja2dyb3VuZF9jb2xvciI6IiMwYTE5MmYiLCJ0aGVtZV9jb2xvciI6IiMxRTNBOEEiLCJvcmllbnRhdGlvbiI6InBvcnRyYWl0In0=">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Sona Communication">
    
    <title>Sona College of Technology - Communication Platform</title>
    
    <!-- Preconnect to external domains for performance -->
    <link rel="preconnect" href="https://rsms.me/">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    
    <!-- CSS -->
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@4/distr/fira_code.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore-compat.js"></script>
    
    <!-- JavaScript -->
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    
    <style>
        /* CSS Variables for theming */
        :root {
            --primary-blue: #0a192f;
            --secondary-blue: #172a45;
            --accent-blue: #233554;
            --primary-yellow: #f1c40f;
            --secondary-yellow: #f9e79f;
            --accent-yellow: #ffd700;
            --text-primary: #ffffff;
            --text-secondary: #a8b2d1;
            --text-muted: #64748b;
            --success: #4ade80;
            --warning: #f59e0b;
            --error: #ef4444;
            --info: #3b82f6;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --font-family: 'Inter', sans-serif;
            --mono-font: 'Fira Code', monospace;
            --card-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --border-radius: 12px;
            --input-padding: 0.875rem;
            --button-padding: 0.875rem 1.5rem;
        }

        /* Base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-family);
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--secondary-blue) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
            position: relative;
        }

        /* Background pattern */
        .background-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 255, 255, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(255, 255, 255, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.03) 0%, transparent 50%);
            z-index: -1;
        }

        /* Header */
        .header {
            background: rgba(10, 25, 47, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 100;
            border-bottom: 1px solid var(--glass-border);
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            height: 50px;
            width: auto;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
            transition: var(--transition);
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            background: linear-gradient(90deg, var(--primary-yellow), var(--accent-yellow));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Main container */
        .main-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }

        .login-container {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 3rem;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            width: 100%;
            max-width: 500px;
            animation: fadeInUp 0.6s ease-out;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--glass-border);
        }

        .login-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--primary-yellow), var(--accent-yellow));
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        /* Logo and title */
        .app-title {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 2.5rem;
        }

        h1 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            background: linear-gradient(90deg, var(--primary-yellow), var(--accent-yellow));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
        }

        /* Form styles */
        .form-group {
            margin-bottom: 1.5rem;
            position: relative;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-primary);
            transition: var(--transition);
        }

        .input-container {
            position: relative;
            display: flex;
            align-items: center;
        }

        .input-icon {
            position: absolute;
            left: 1rem;
            color: var(--text-secondary);
            z-index: 1;
            transition: var(--transition);
        }

        input, select {
            width: 100%;
            padding: var(--input-padding);
            padding-left: 3rem;
            border: 2px solid var(--glass-border);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
            background: var(--glass-bg);
            color: var(--text-primary);
            font-family: var(--font-family);
        }

        select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23a8b2d1' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1rem;
        }

        input:focus, select:focus {
            border-color: var(--primary-yellow);
            box-shadow: 0 0 0 3px rgba(241, 196, 15, 0.15);
            outline: none;
        }

        input:focus + .input-icon, select:focus + .input-icon {
            color: var(--primary-yellow);
        }

        .password-toggle {
            position: absolute;
            right: 1rem;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
            padding: 0.25rem;
            border-radius: 4px;
        }

        .password-toggle:hover {
            color: var(--text-primary);
            background: var(--glass-bg);
        }

        /* Form options */
        .form-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 1.5rem 0;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
        }

        .checkbox-group input {
            width: auto;
            margin-right: 0.5rem;
            accent-color: var(--primary-yellow);
        }

        .checkbox-group label {
            margin-bottom: 0;
            font-size: 0.875rem;
            color: var(--text-secondary);
            cursor: pointer;
        }

        .forgot-link {
            font-size: 0.875rem;
            color: var(--info);
            text-decoration: none;
            transition: var(--transition);
            font-weight: 500;
        }

        .forgot-link:hover {
            color: var(--primary-yellow);
            text-decoration: underline;
        }

        /* Buttons */
        .btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: var(--button-padding);
            border: none;
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            margin-bottom: 1rem;
            gap: 0.5rem;
            text-decoration: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-yellow) 0%, var(--accent-yellow) 100%);
            color: var(--primary-blue);
            box-shadow: 0 4px 15px rgba(241, 196, 15, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(241, 196, 15, 0.4);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-microsoft {
            background: #0078d4;
            color: white;
            box-shadow: 0 4px 15px rgba(0, 120, 212, 0.3);
        }

        .btn-microsoft:hover {
            background: #106ebe;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 120, 212, 0.4);
        }

        .btn-google {
            background: #db4437;
            color: white;
            box-shadow: 0 4px 15px rgba(219, 68, 55, 0.3);
        }

        .btn-google:hover {
            background: #c23321;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(219, 68, 55, 0.4);
        }

        .btn-loading .btn-text {
            visibility: hidden;
            opacity: 0;
        }

        .btn-loading::after {
            content: "";
            position: absolute;
            width: 20px;
            height: 20px;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            margin: auto;
            border: 2px solid transparent;
            border-top-color: var(--text-primary);
            border-radius: 50%;
            animation: button-loading-spinner 1s ease infinite;
        }

        @keyframes button-loading-spinner {
            from { transform: rotate(0turn); }
            to { transform: rotate(1turn); }
        }

        /* Divider */
        .divider {
            display: flex;
            align-items: center;
            margin: 1.5rem 0;
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .divider::before,
        .divider::after {
            content: "";
            flex: 1;
            height: 1px;
            background: var(--glass-border);
        }

        .divider span {
            padding: 0 1rem;
        }

        /* Role badges */
        .role-badges {
            display: flex;
            gap: 0.75rem;
            margin-top: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .role-badge {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            background: var(--glass-bg);
            color: var(--text-secondary);
            transition: var(--transition);
            cursor: pointer;
            user-select: none;
            border: 1px solid var(--glass-border);
            position: relative;
            overflow: hidden;
        }

        .role-badge:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--primary-yellow);
            transform: translateY(-2px);
        }

        .role-badge.active {
            background: var(--primary-yellow);
            color: var(--primary-blue);
            border-color: var(--primary-yellow);
            box-shadow: 0 4px 10px rgba(241, 196, 15, 0.3);
        }

        /* Register link */
        .register-link {
            text-align: center;
            margin-top: 1.5rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .register-link a {
            color: var(--info);
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
        }

        .register-link a:hover {
            color: var(--primary-yellow);
            text-decoration: underline;
        }

        /* Security notice */
        .security-notice {
            margin-top: 1.5rem;
            padding: 1rem;
            background: rgba(241, 196, 15, 0.1);
            border-radius: var(--border-radius);
            font-size: 0.875rem;
            color: var(--text-primary);
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            border-left: 4px solid var(--primary-yellow);
        }

        /* Demo credentials */
        .demo-credentials {
            margin-top: 2rem;
            padding: 1.5rem;
            background: rgba(76, 175, 80, 0.1);
            border-radius: var(--border-radius);
            border: 1px solid rgba(76, 175, 80, 0.3);
        }

        .demo-credentials h3 {
            color: #4ade80;
            margin-bottom: 1rem;
            font-size: 1.1rem;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .demo-account {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            transition: var(--transition);
        }

        .demo-account:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .demo-account-info {
            display: flex;
            flex-direction: column;
        }

        .demo-account-role {
            font-weight: 600;
            color: var(--text-primary);
        }

        .demo-account-email {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .demo-account-btn {
            padding: 0.4rem 0.8rem;
            font-size: 0.75rem;
            background: #4ade80;
            color: var(--primary-blue);
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
        }

        .demo-account-btn:hover {
            background: #22c55e;
            transform: scale(1.05);
        }

        /* Modal styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
            padding: 1rem;
        }

        .modal-content {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 2.5rem;
            border-radius: var(--border-radius);
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: modalFadeIn 0.3s ease-out;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--glass-border);
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: scale(0.9) translateY(-20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        .close-btn {
            position: absolute;
            top: 1.25rem;
            right: 1.25rem;
            font-size: 1.5rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
            background: none;
            border: none;
            width: 2.5rem;
            height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-btn:hover {
            color: var(--text-primary);
            background: var(--glass-bg);
        }

        .modal h2 {
            margin-bottom: 1.5rem;
            color: var(--primary-yellow);
            font-size: 1.5rem;
        }

        /* Password strength */
        .password-strength {
            margin-top: 0.5rem;
            height: 4px;
            border-radius: 2px;
            background: var(--glass-border);
            overflow: hidden;
        }

        .password-strength-bar {
            height: 100%;
            width: 0%;
            transition: var(--transition);
        }

        .password-strength.weak .password-strength-bar {
            width: 33%;
            background: var(--error);
        }

        .password-strength.medium .password-strength-bar {
            width: 66%;
            background: var(--warning);
        }

        .password-strength.strong .password-strength-bar {
            width: 100%;
            background: var(--success);
        }

        .password-strength-text {
            font-size: 0.75rem;
            margin-top: 0.25rem;
            color: var(--text-secondary);
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 1.25rem;
            right: 1.25rem;
            padding: 1rem 1.5rem;
            border-radius: var(--border-radius);
            color: var(--text-primary);
            font-weight: 500;
            box-shadow: var(--card-shadow);
            z-index: 1100;
            transform: translateX(150%);
            transition: transform 0.3s ease;
            max-width: 90%;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: var(--success);
        }

        .notification.error {
            background: var(--error);
        }

        .notification.info {
            background: var(--info);
        }

        /* Footer */
        .footer {
            background: rgba(10, 25, 47, 0.95);
            backdrop-filter: blur(10px);
            padding: 1.5rem;
            text-align: center;
            color: var(--text-secondary);
            border-top: 1px solid var(--glass-border);
            font-size: 0.875rem;
        }

        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .footer-heart {
            color: #e74c3c;
            animation: heartbeat 1.2s infinite;
        }

        @keyframes heartbeat {
            0% { transform: scale(1); }
            25% { transform: scale(1.1); }
            50% { transform: scale(1); }
            75% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Responsive design */
        @media (max-width: 768px) {
            html {
                font-size: 14px;
            }
            
            .header {
                padding: 1rem;
            }
            
            .logo-text {
                font-size: 1.2rem;
            }
            
            .login-container {
                padding: 2rem 1.5rem;
            }
            
            .modal-content {
                padding: 2rem 1.5rem;
            }
            
            .form-options {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .notification {
                right: 0.75rem;
                left: 0.75rem;
                max-width: none;
            }
        }

        @media (max-width: 480px) {
            html {
                font-size: 13px;
            }
            
            .header {
                padding: 0.75rem;
            }
            
            .logo {
                height: 40px;
            }
            
            .logo-text {
                font-size: 1rem;
            }
            
            .login-container {
                padding: 1.5rem 1rem;
            }
            
            .modal-content {
                padding: 1.5rem 1rem;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .btn {
                padding: 0.75rem 1rem;
            }
        }

        /* Accessibility improvements */
        :focus-visible {
            outline: 2px solid var(--primary-yellow);
            outline-offset: 2px;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--secondary-blue);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-yellow);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-yellow);
        }
    </style>
</head>
<body>
    <div class="background-pattern"></div>
    
    <!-- Header -->
    <header class="header">
        <div class="logo-container">
            <img src="https://upload.wikimedia.org/wikipedia/commons/9/9d/Sona_College_of_Technology_logo.jpg" alt="Sona College of Technology Logo" class="logo">
            <span class="logo-text">Sona College of Technology</span>
        </div>
    </header>
    
    <!-- Main Container -->
    <div class="main-container">
        <div class="login-container">
            <div class="app-title">
                <h1>Communication Platform</h1>
                <p class="subtitle">Secure Hierarchical Communication System</p>
            </div>
            
            <form id="loginForm" aria-label="Login form">
                <div class="form-group">
                    <label for="collegeId">College ID</label>
                    <div class="input-container">
                        <i class="fas fa-user input-icon" aria-hidden="true"></i>
                        <input type="text" id="collegeId" required aria-required="true" placeholder="Enter your College ID" autocomplete="username">
                    </div>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <div class="input-container">
                        <i class="fas fa-lock input-icon" aria-hidden="true"></i>
                        <input type="password" id="password" required aria-required="true" placeholder="Enter your password" autocomplete="current-password">
                        <button type="button" class="password-toggle" id="passwordToggle" aria-label="Toggle password visibility">
                            <i class="fas fa-eye" aria-hidden="true"></i>
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="role">Role</label>
                    <div class="input-container">
                        <i class="fas fa-user-tag input-icon" aria-hidden="true"></i>
                        <select id="role" required aria-required="true">
                            <option value="">Select Your Role</option>
                            <option value="student">Student</option>
                            <option value="faculty">Faculty</option>
                            <option value="hod">Head of Department</option>
                            <option value="principal">Principal</option>
                        </select>
                    </div>
                </div>
                
                <div class="role-badges" role="group" aria-label="Role selection">
                    <button type="button" class="role-badge role-student" data-role="student" aria-pressed="false">
                        <i class="fas fa-graduation-cap" aria-hidden="true"></i> Student
                    </button>
                    <button type="button" class="role-badge role-faculty" data-role="faculty" aria-pressed="false">
                        <i class="fas fa-chalkboard-teacher" aria-hidden="true"></i> Faculty
                    </button>
                    <button type="button" class="role-badge role-hod" data-role="hod" aria-pressed="false">
                        <i class="fas fa-user-tie" aria-hidden="true"></i> HOD
                    </button>
                    <button type="button" class="role-badge role-principal" data-role="principal" aria-pressed="false">
                        <i class="fas fa-user-shield" aria-hidden="true"></i> Principal
                    </button>
                </div>
                
                <div class="form-options">
                    <div class="checkbox-group">
                        <input type="checkbox" id="rememberMe" name="rememberMe">
                        <label for="rememberMe">Remember Me</label>
                    </div>
                    <a href="#" class="forgot-link" id="forgotPassword">Forgot Password?</a>
                </div>
                
                <button type="submit" class="btn btn-primary" aria-live="polite">
                    <span class="btn-text">Login to Platform</span>
                </button>
            </form>
            
            <div class="divider">
                <span>OR</span>
            </div>
            
            <button type="button" class="btn btn-microsoft" id="microsoftLoginBtn" aria-live="polite">
                <i class="fab fa-microsoft" aria-hidden="true"></i>
                <span class="btn-text">Login with Microsoft</span>
            </button>
            
            <button type="button" class="btn btn-google" id="googleLoginBtn" aria-live="polite">
                <i class="fab fa-google" aria-hidden="true"></i>
                <span class="btn-text">Login with Google</span>
            </button>
            
            <p class="register-link">New to Sona Communication? <a href="#" id="registerLink">Create an account</a></p>
            
            <!-- Demo Credentials Section -->
            <div class="demo-credentials">
                <h3><i class="fas fa-flask" aria-hidden="true"></i> Demo Accounts</h3>
                <div class="demo-account">
                    <div class="demo-account-info">
                        <div class="demo-account-role">Principal</div>
                        <div class="demo-account-email">demo.principal@sona.edu</div>
                    </div>
                    <button class="demo-account-btn" onclick="fillDemoAccount('PRIN001', 'Demo@123', 'principal')">Try Demo</button>
                </div>
                <div class="demo-account">
                    <div class="demo-account-info">
                        <div class="demo-account-role">HOD CSE</div>
                        <div class="demo-account-email">demo.hod@sona.edu</div>
                    </div>
                    <button class="demo-account-btn" onclick="fillDemoAccount('HOD001', 'Demo@123', 'hod')">Try Demo</button>
                </div>
                <div class="demo-account">
                    <div class="demo-account-info">
                        <div class="demo-account-role">Faculty</div>
                        <div class="demo-account-email">demo.faculty@sona.edu</div>
                    </div>
                    <button class="demo-account-btn" onclick="fillDemoAccount('FAC001', 'Demo@123', 'faculty')">Try Demo</button>
                </div>
                <div class="demo-account">
                    <div class="demo-account-info">
                        <div class="demo-account-role">Student</div>
                        <div class="demo-account-email">demo.student@sona.edu</div>
                    </div>
                    <button class="demo-account-btn" onclick="fillDemoAccount('STU001', 'Demo@123', 'student')">Try Demo</button>
                </div>
            </div>
            
            <div class="security-notice">
                <i class="fas fa-shield-alt" aria-hidden="true"></i>
                <span>All communications are end-to-end encrypted</span>
            </div>
        </div>
    </div>

    <!-- Registration Modal -->
    <div class="modal" id="registerModal" role="dialog" aria-labelledby="registerModalTitle" aria-modal="true">
        <div class="modal-content">
            <button class="close-btn" id="closeRegister" aria-label="Close registration modal">&times;</button>
            <h2 id="registerModalTitle">Register New User</h2>
            <form id="registerForm" aria-label="Registration form">
                <div class="form-group">
                    <label for="regCollegeId">College ID</label>
                    <div class="input-container">
                        <i class="fas fa-id-card input-icon" aria-hidden="true"></i>
                        <input type="text" id="regCollegeId" required placeholder="e.g., SONA2024001" autocomplete="username">
                    </div>
                </div>
                <div class="form-group">
                    <label for="regEmail">Email Address</label>
                    <div class="input-container">
                        <i class="fas fa-envelope input-icon" aria-hidden="true"></i>
                        <input type="email" id="regEmail" required pattern=".+@sonatech\.ac\.in" placeholder="name@sonatech.ac.in" autocomplete="email">
                    </div>
                </div>
                <div class="form-group">
                    <label for="regPassword">Password</label>
                    <div class="input-container">
                        <i class="fas fa-lock input-icon" aria-hidden="true"></i>
                        <input type="password" id="regPassword" required placeholder="Create a strong password" autocomplete="new-password">
                        <button type="button" class="password-toggle" id="regPasswordToggle" aria-label="Toggle password visibility">
                            <i class="fas fa-eye" aria-hidden="true"></i>
                        </button>
                    </div>
                    <div class="password-strength" id="passwordStrength" aria-hidden="true">
                        <div class="password-strength-bar"></div>
                    </div>
                    <div class="password-strength-text" id="passwordStrengthText" aria-live="polite">Password strength</div>
                </div>
                <div class="form-group">
                    <label for="regRole">Role</label>
                    <div class="input-container">
                        <i class="fas fa-user-tag input-icon" aria-hidden="true"></i>
                        <select id="regRole" required>
                            <option value="">Select Your Role</option>
                            <option value="student">Student</option>
                            <option value="faculty">Faculty</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="regDepartment">Department ID</label>
                    <div class="input-container">
                        <i class="fas fa-building input-icon" aria-hidden="true"></i>
                        <input type="number" id="regDepartment" required placeholder="e.g., 101">
                    </div>
                </div>
                <div class="form-group">
                    <label for="regFullName">Full Name</label>
                    <div class="input-container">
                        <i class="fas fa-user input-icon" aria-hidden="true"></i>
                        <input type="text" id="regFullName" required placeholder="Enter your full name" autocomplete="name">
                    </div>
                </div>
                <button type="submit" class="btn btn-primary" aria-live="polite">
                    <span class="btn-text">Submit for Approval</span>
                </button>
            </form>
            
            <div class="divider">
                <span>OR</span>
            </div>
            
            <button type="button" class="btn btn-microsoft" id="microsoftRegisterBtn" aria-live="polite">
                <i class="fab fa-microsoft" aria-hidden="true"></i>
                <span class="btn-text">Register with Microsoft</span>
            </button>
            
            <button type="button" class="btn btn-google" id="googleRegisterBtn" aria-live="polite">
                <i class="fab fa-google" aria-hidden="true"></i>
                <span class="btn-text">Register with Google</span>
            </button>
        </div>
    </div>

    <!-- Forgot Password Modal -->
    <div class="modal" id="forgotModal" role="dialog" aria-labelledby="forgotModalTitle" aria-modal="true">
        <div class="modal-content">
            <button class="close-btn" id="closeForgot" aria-label="Close forgot password modal">&times;</button>
            <h2 id="forgotModalTitle">Reset Your Password</h2>
            <form id="forgotForm" aria-label="Password reset form">
                <div class="form-group">
                    <label for="forgotEmail">Email Address</label>
                    <div class="input-container">
                        <i class="fas fa-envelope input-icon" aria-hidden="true"></i>
                        <input type="email" id="forgotEmail" required placeholder="Enter your registered email" autocomplete="email">
                    </div>
                </div>
                <button type="submit" class="btn btn-primary" aria-live="polite">
                    <span class="btn-text">Send Reset Link</span>
                </button>
            </form>
        </div>
    </div>

    <!-- Google/Microsoft Account Setup Modal -->
    <div class="modal" id="socialSetupModal" role="dialog" aria-labelledby="socialSetupModalTitle" aria-modal="true">
        <div class="modal-content">
            <button class="close-btn" id="closeSocialSetup" aria-label="Close setup modal">&times;</button>
            <h2 id="socialSetupModalTitle">Complete Your Profile</h2>
            <p class="subtitle" style="margin-bottom: 1.5rem;">Please provide additional information to complete your account setup</p>
            <form id="socialSetupForm" aria-label="Social account setup form">
                <div class="form-group">
                    <label for="socialCollegeId">College ID</label>
                    <div class="input-container">
                        <i class="fas fa-id-card input-icon" aria-hidden="true"></i>
                        <input type="text" id="socialCollegeId" required placeholder="e.g., SONA2024001" autocomplete="username">
                    </div>
                </div>
                <div class="form-group">
                    <label for="socialRole">Role</label>
                    <div class="input-container">
                        <i class="fas fa-user-tag input-icon" aria-hidden="true"></i>
                        <select id="socialRole" required>
                            <option value="">Select Your Role</option>
                            <option value="student">Student</option>
                            <option value="faculty">Faculty</option>
                            <option value="hod">Head of Department</option>
                            <option value="principal">Principal</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="socialDepartment">Department ID</label>
                    <div class="input-container">
                        <i class="fas fa-building input-icon" aria-hidden="true"></i>
                        <input type="number" id="socialDepartment" required placeholder="e.g., 101">
                    </div>
                </div>
                <div class="form-group">
                    <label for="socialFullName">Full Name</label>
                    <div class="input-container">
                        <i class="fas fa-user input-icon" aria-hidden="true"></i>
                        <input type="text" id="socialFullName" required placeholder="Enter your full name" autocomplete="name">
                    </div>
                </div>
                <button type="submit" class="btn btn-primary" aria-live="polite">
                    <span class="btn-text">Complete Setup</span>
                </button>
            </form>
        </div>
    </div>

    <div class="notification" id="notification" role="alert" aria-live="assertive"></div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2025 Sona College of Technology. All rights reserved.</p>
            <p>Made with <i class="fas fa-heart footer-heart"></i> by Krishna</p>
        </div>
    </footer>

    <script>
        // Enhanced security configurations
        const SECURITY_CONFIG = {
            // Password requirements
            minPasswordLength: 8,
            requireUppercase: true,
            requireLowercase: true,
            requireNumbers: true,
            requireSpecialChars: true,
            
            // Rate limiting
            maxLoginAttempts: 5,
            lockoutDuration: 15 * 60 * 1000, // 15 minutes
            
            // Session security
            sessionTimeout: 30 * 60 * 1000, // 30 minutes
            
            // Two-factor authentication
            enable2FA: false
        };

        // Secure user database (in production, this would be server-side)
        const secureUsers = {
            'PRIN001': { 
                password: CryptoJS.SHA256('Demo@123').toString(), 
                role: 'principal', 
                name: 'Dr. Principal Demo', 
                department: 'Administration',
                email: 'principal@sonatech.ac.in',
                salt: 'random_salt_1'
            },
            'HOD001': { 
                password: CryptoJS.SHA256('Demo@123').toString(), 
                role: 'hod', 
                name: 'Dr. HOD Demo', 
                department: 'Computer Science',
                email: 'hod.cse@sonatech.ac.in',
                salt: 'random_salt_2'
            },
            'FAC001': { 
                password: CryptoJS.SHA256('Demo@123').toString(), 
                role: 'faculty', 
                name: 'Prof. Faculty Demo', 
                department: 'Computer Science',
                email: 'faculty@sonatech.ac.in',
                salt: 'random_salt_3'
            },
            'STU001': { 
                password: CryptoJS.SHA256('Demo@123').toString(), 
                role: 'student', 
                name: 'Student Demo', 
                department: 'Computer Science',
                email: 'student@sonatech.ac.in',
                salt: 'random_salt_4'
            }
        };

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCWcis4jU3gVTWZyiIn5PF90R6nopEpAF0",
            authDomain: "bhasha-rakshak-lite.firebaseapp.com",
            projectId: "bhasha-rakshak-lite",
            storageBucket: "bhasha-rakshak-lite.firebasestorage.app",
            messagingSenderId: "996574989053",
            appId: "1:996574989053:web:fb897ff8a7fb6182ae0c94"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Session management
        const sessionManager = {
            startSession: function(userData) {
                const sessionData = {
                    user: userData,
                    startTime: Date.now(),
                    lastActivity: Date.now()
                };
                sessionStorage.setItem('userSession', JSON.stringify(sessionData));
                this.startSessionTimeout();
            },
            
            updateActivity: function() {
                const session = JSON.parse(sessionStorage.getItem('userSession'));
                if (session) {
                    session.lastActivity = Date.now();
                    sessionStorage.setItem('userSession', JSON.stringify(session));
                }
            },
            
            isSessionValid: function() {
                const session = JSON.parse(sessionStorage.getItem('userSession'));
                if (!session) return false;
                
                const now = Date.now();
                const timeDiff = now - session.lastActivity;
                return timeDiff < SECURITY_CONFIG.sessionTimeout;
            },
            
            clearSession: function() {
                sessionStorage.removeItem('userSession');
                localStorage.removeItem('loginAttempts');
            },
            
            startSessionTimeout: function() {
                setTimeout(() => {
                    if (!this.isSessionValid()) {
                        this.clearSession();
                        showNotification('Session expired. Please login again.', 'warning');
                        // Redirect to login page
                        window.location.reload();
                    }
                }, SECURITY_CONFIG.sessionTimeout);
            }
        };

        // Rate limiting for login attempts
        const rateLimiter = {
            getAttempts: function() {
                const attempts = localStorage.getItem('loginAttempts');
                return attempts ? JSON.parse(attempts) : { count: 0, lastAttempt: 0 };
            },
            
            addAttempt: function() {
                const attempts = this.getAttempts();
                attempts.count++;
                attempts.lastAttempt = Date.now();
                localStorage.setItem('loginAttempts', JSON.stringify(attempts));
                return attempts;
            },
            
            isLocked: function() {
                const attempts = this.getAttempts();
                if (attempts.count >= SECURITY_CONFIG.maxLoginAttempts) {
                    const timeDiff = Date.now() - attempts.lastAttempt;
                    return timeDiff < SECURITY_CONFIG.lockoutDuration;
                }
                return false;
            },
            
            reset: function() {
                localStorage.removeItem('loginAttempts');
            },
            
            getRemainingLockTime: function() {
                const attempts = this.getAttempts();
                if (attempts.count >= SECURITY_CONFIG.maxLoginAttempts) {
                    const timeDiff = Date.now() - attempts.lastAttempt;
                    const remaining = SECURITY_CONFIG.lockoutDuration - timeDiff;
                    return Math.max(0, Math.ceil(remaining / 1000 / 60)); // minutes
                }
                return 0;
            }
        };

        // Password validation
        function validatePassword(password) {
            const errors = [];
            
            if (password.length < SECURITY_CONFIG.minPasswordLength) {
                errors.push(`Password must be at least ${SECURITY_CONFIG.minPasswordLength} characters`);
            }
            
            if (SECURITY_CONFIG.requireUppercase && !/[A-Z]/.test(password)) {
                errors.push('Password must contain at least one uppercase letter');
            }
            
            if (SECURITY_CONFIG.requireLowercase && !/[a-z]/.test(password)) {
                errors.push('Password must contain at least one lowercase letter');
            }
            
            if (SECURITY_CONFIG.requireNumbers && !/\d/.test(password)) {
                errors.push('Password must contain at least one number');
            }
            
            if (SECURITY_CONFIG.requireSpecialChars && !/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password)) {
                errors.push('Password must contain at least one special character');
            }
            
            return {
                isValid: errors.length === 0,
                errors: errors,
                strength: calculatePasswordStrength(password)
            };
        }

        function calculatePasswordStrength(password) {
            let score = 0;
            let strength = 'weak';
            
            // Length bonus
            if (password.length >= 8) score += 1;
            if (password.length >= 12) score += 1;
            
            // Character variety
            if (/[a-z]/.test(password)) score += 1;
            if (/[A-Z]/.test(password)) score += 1;
            if (/\d/.test(password)) score += 1;
            if (/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password)) score += 1;
            
            // Determine strength
            if (score >= 5) strength = 'strong';
            else if (score >= 3) strength = 'medium';
            
            return strength;
        }

        // DOM Elements
        const elements = {
            loginForm: document.getElementById('loginForm'),
            registerForm: document.getElementById('registerForm'),
            forgotForm: document.getElementById('forgotForm'),
            socialSetupForm: document.getElementById('socialSetupForm'),
            registerModal: document.getElementById('registerModal'),
            forgotModal: document.getElementById('forgotModal'),
            socialSetupModal: document.getElementById('socialSetupModal'),
            passwordToggle: document.getElementById('passwordToggle'),
            regPasswordToggle: document.getElementById('regPasswordToggle'),
            passwordField: document.getElementById('password'),
            regPasswordField: document.getElementById('regPassword'),
            roleBadges: document.querySelectorAll('.role-badge'),
            roleSelect: document.getElementById('role'),
            passwordStrength: document.getElementById('passwordStrength'),
            passwordStrengthText: document.getElementById('passwordStrengthText'),
            notification: document.getElementById('notification'),
            microsoftLoginBtn: document.getElementById('microsoftLoginBtn'),
            microsoftRegisterBtn: document.getElementById('microsoftRegisterBtn'),
            googleLoginBtn: document.getElementById('googleLoginBtn'),
            googleRegisterBtn: document.getElementById('googleRegisterBtn')
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', () => {
            setupEventListeners();
            setupSessionMonitoring();
            checkAuthState();
        });

        // Session monitoring
        function setupSessionMonitoring() {
            // Update activity on user interaction
            document.addEventListener('click', () => sessionManager.updateActivity());
            document.addEventListener('keypress', () => sessionManager.updateActivity());
            document.addEventListener('scroll', () => sessionManager.updateActivity());
        }

        // Check authentication state
        function checkAuthState() {
            auth.onAuthStateChanged(user => {
                if (user) {
                    handleAuthenticatedUser(user);
                }
            });
        }

        // Handle authenticated user
        function handleAuthenticatedUser(user) {
            // Get additional user data from Firestore
            db.collection('users').doc(user.uid).get()
                .then(doc => {
                    if (doc.exists) {
                        const userData = doc.data();
                        sessionManager.startSession(userData);
                        redirectToRoleBasedPage(userData);
                    } else {
                        // New social auth user, show setup modal
                        openModal(elements.socialSetupModal);
                        document.getElementById('socialFullName').value = user.displayName || '';
                    }
                })
                .catch(error => {
                    console.error("Error getting user data:", error);
                    showNotification('Error loading user data', 'error');
                });
        }

        // Redirect to role-based pages
        function redirectToRoleBasedPage(userData) {
            const rolePages = {
                'student': 'student-dashboard.html',
                'faculty': 'faculty-dashboard.html', 
                'hod': 'hod-dashboard.html',
                'principal': 'principal-dashboard.html'
            };
            
            const targetPage = rolePages[userData.role];
            
            if (targetPage) {
                showNotification(`Welcome, ${userData.name}! Redirecting to ${userData.role} dashboard...`, 'success');
                
                // Store user data for the target page
                sessionStorage.setItem('currentUser', JSON.stringify(userData));
                
                // Simulate page redirect (in production, use actual routing)
                setTimeout(() => {
                    // window.location.href = targetPage;
                    
                    // For demo purposes, show a simulation
                    showPageRedirectSimulation(userData, targetPage);
                }, 1500);
            } else {
                showNotification('Unknown role. Contact administrator.', 'error');
            }
        }

        // Page redirect simulation (for demo)
        function showPageRedirectSimulation(userData, targetPage) {
            document.body.innerHTML = `
                <div style="display: flex; justify-content: center; align-items: center; height: 100vh; background: linear-gradient(135deg, #0a192f 0%, #172a45 100%); color: white; font-family: 'Inter', sans-serif;">
                    <div style="text-align: center; padding: 3rem; background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(20px); border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.1);">
                        <div style="margin-bottom: 2rem;">
                            <div style="width: 80px; height: 80px; margin: 0 auto 1rem; background: linear-gradient(135deg, #f1c40f, #ffd700); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem;">
                                <i class="fas fa-${getRoleIcon(userData.role)}"></i>
                            </div>
                            <h1 style="font-size: 2rem; margin-bottom: 0.5rem; background: linear-gradient(90deg, #f1c40f, #ffd700); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                                ${userData.role.charAt(0).toUpperCase() + userData.role.slice(1)} Dashboard
                            </h1>
                            <p style="color: #a8b2d1; margin-bottom: 2rem;">Welcome, ${userData.name}</p>
                        </div>
                        
                        <div style="background: rgba(76, 175, 80, 0.1); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #4ade80; margin-bottom: 2rem;">
                            <h3 style="color: #4ade80; margin-bottom: 1rem;">
                                <i class="fas fa-info-circle"></i> Page Redirect Simulation
                            </h3>
                            <p style="color: #a8b2d1; line-height: 1.5;">
                                In a production environment, you would be redirected to:<br>
                                <strong style="color: #f1c40f;">${targetPage}</strong><br><br>
                                This page would contain role-specific features like messaging, announcements, 
                                hierarchical communication tools, and department-specific functionality.
                            </p>
                        </div>
                        
                        <button onclick="window.location.reload()" style="background: linear-gradient(135deg, #f1c40f 0%, #ffd700 100%); color: #0a192f; border: none; padding: 0.875rem 1.5rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                            <i class="fas fa-arrow-left"></i> Back to Login
                        </button>
                    </div>
                </div>
            `;
        }

        // Get role icon
        function getRoleIcon(role) {
            const icons = {
                'student': 'graduation-cap',
                'faculty': 'chalkboard-teacher',
                'hod': 'user-tie',
                'principal': 'user-shield'
            };
            return icons[role] || 'user';
        }

        // Fill demo account details
        function fillDemoAccount(collegeId, password, role) {
            document.getElementById('collegeId').value = collegeId;
            document.getElementById('password').value = password;
            document.getElementById('role').value = role;
            
            // Update role badges
            elements.roleBadges.forEach(badge => {
                if (badge.getAttribute('data-role') === role) {
                    badge.classList.add('active');
                    badge.setAttribute('aria-pressed', 'true');
                } else {
                    badge.classList.remove('active');
                    badge.setAttribute('aria-pressed', 'false');
                }
            });
            
            showNotification('Demo account details filled. Click Login to continue.', 'info');
        }

        // Setup event listeners
        function setupEventListeners() {
            // Password visibility toggles
            elements.passwordToggle?.addEventListener('click', () => togglePasswordVisibility(elements.passwordField, elements.passwordToggle));
            elements.regPasswordToggle?.addEventListener('click', () => togglePasswordVisibility(elements.regPasswordField, elements.regPasswordToggle));

            // Role badge selection
            elements.roleBadges.forEach(badge => {
                badge.addEventListener('click', () => selectRoleBadge(badge));
            });

            // Role select dropdown change
            elements.roleSelect?.addEventListener('change', () => {
                const selectedRole = elements.roleSelect.value;
                elements.roleBadges.forEach(badge => {
                    if (badge.getAttribute('data-role') === selectedRole) {
                        badge.classList.add('active');
                        badge.setAttribute('aria-pressed', 'true');
                    } else {
                        badge.classList.remove('active');
                        badge.setAttribute('aria-pressed', 'false');
                    }
                });
            });

            // Password strength indicator
            elements.regPasswordField?.addEventListener('input', updatePasswordStrength);

            // Modal handlers
            document.getElementById('registerLink')?.addEventListener('click', (e) => {
                e.preventDefault();
                openModal(elements.registerModal);
            });

            document.getElementById('closeRegister')?.addEventListener('click', () => {
                closeModal(elements.registerModal);
            });

            document.getElementById('forgotPassword')?.addEventListener('click', (e) => {
                e.preventDefault();
                openModal(elements.forgotModal);
            });

            document.getElementById('closeForgot')?.addEventListener('click', () => {
                closeModal(elements.forgotModal);
            });

            document.getElementById('closeSocialSetup')?.addEventListener('click', () => {
                closeModal(elements.socialSetupModal);
            });

            // Close modals when clicking outside
            [elements.registerModal, elements.forgotModal, elements.socialSetupModal].forEach(modal => {
                modal?.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        closeModal(modal);
                    }
                });
            });

            // Form submissions
            elements.loginForm?.addEventListener('submit', handleLogin);
            elements.registerForm?.addEventListener('submit', handleRegister);
            elements.forgotForm?.addEventListener('submit', handleForg
